@if(!sendMailFlag){
<div class="container my-5">
  <div class="card w-75 mx-auto shadow border-0 rounded-3">
    <div class="card-body p-5">
      <h2 class="text-center mb-4">Forgot Password</h2>
      <form [formGroup]="sendMailForm" (ngSubmit)="sendMail(sendMailForm)">
        <div class="mb-3">
          <input formControlName="email" class="form-control" type="email" placeholder="Enter your email">
          @if(sendMailForm.get('email')?.errors!==null && sendMailForm.get('email')?.touched && sendMailError===''){
          <div class="text-danger mt-2">
            @if(sendMailForm.get('email')?.errors?.['required']){<p>Email is required</p>}
            @if(sendMailForm.get('email')?.errors?.['email']){<p>Invalid email format</p>}
          </div>
          }
          @if(sendMailError!==''){
          <div class="text-danger mt-2">
            <p>{{sendMailError}}</p>
          </div>
          }
        </div>
        <button [disabled]="sendMailForm.invalid" class="btn btn-danger w-100 py-2">Send Mail</button>
      </form>
    </div>
  </div>
</div>
}

@if(sendMailFlag && !verifyCodeFlag){
<div class="container my-5">
  <div class="card w-50 mx-auto shadow border-0 rounded-3">
    <div class="card-body p-5">
      <h2 class="text-center mb-4">Enter Reset Code</h2>
      <form [formGroup]="verifyCodeForm" (ngSubmit)="verifyCode(verifyCodeForm)">
        <div class="mb-3">
          <input formControlName="resetCode" class="form-control" type="text" placeholder="Enter reset code">
          @if(verifyCodeForm.get('resetCode')?.errors!==null && verifyCodeForm.get('resetCode')?.touched && verifyCodeError===''){
          <div class="text-danger mt-2">
            @if(verifyCodeForm.get('resetCode')?.errors?.['required']){<p>Reset code is required</p>}
            @if(verifyCodeForm.get('resetCode')?.errors?.['maxlength']){<p>Invalid reset code</p>}
          </div>
          }
          @if(verifyCodeError!==''){
          <div class="text-danger mt-2">
            <p>{{verifyCodeError}}</p>
          </div>
          }
        </div>
        <button [disabled]="verifyCodeForm.invalid" class="btn btn-danger w-100 py-2">Verify Code</button>
      </form>
    </div>
  </div>
</div>
}

@if(verifyCodeFlag){
<div class="container my-5">
  <div class="card w-50 mx-auto shadow border-0 rounded-3">
    <div class="card-body p-5">
      <h2 class="text-center mb-4">Reset Password</h2>
      <form [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword(resetPasswordForm)">
        <div class="mb-3">
          <input formControlName="password" class="form-control" type="password" placeholder="New password">
          @if(resetPasswordForm.get('password')?.errors!==null && resetPasswordForm.get('password')?.touched){
          <div class="text-danger mt-2">
            @if(resetPasswordForm.get('password')?.errors?.['required']){<p>Password is required</p>}
            @if(resetPasswordForm.get('password')?.errors?.['minlength'] || resetPasswordForm.get('password')?.errors?.['maxlength']){<p>Password must be between 6 and 20 characters</p>}
          </div>
          }
        </div>
        <div class="mb-3">
          <input formControlName="confirmPassword" class="form-control" type="password" placeholder="Confirm password">
          @if(resetPasswordForm.get('confirmPassword')?.errors!==null && resetPasswordForm.get('confirmPassword')?.touched && resetPasswordError===''){
          <div class="text-danger mt-2">
            @if(resetPasswordForm.get('confirmPassword')?.errors?.['required']){<p>Confirm password is required</p>}
            @if(resetPasswordForm.get('confirmPassword')?.errors?.['minlength'] || resetPasswordForm.get('confirmPassword')?.errors?.['maxlength']){<p>Confirm password must be between 6 and 20 characters</p>}
            </div>
          }
          @if(resetPasswordError!==''){
          <div class="text-danger mt-2">
            <p>{{resetPasswordError}}</p>
          </div>
          }
        </div>
        <button [disabled]="resetPasswordForm.invalid" class="btn btn-danger w-100 py-2">Reset Password</button>
      </form>
    </div>
  </div>
</div>
}